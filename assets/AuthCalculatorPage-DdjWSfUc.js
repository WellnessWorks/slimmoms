import{r,j as e,N as A,m as R,n as y}from"./index-CC51kfD9.js";import{S as T}from"./SummaryCard-Bj2i0aWl.js";const G="_form_u0nai_5",I="_warning_u0nai_11",q="_warningIcon_u0nai_25",E="_row_u0nai_29",F="_field_u0nai_36",D="_label_u0nai_46",B="_input_u0nai_55",k="_radioGroup_u0nai_81",M="_radioLabel_u0nai_89",O="_button_u0nai_106",a={form:G,warning:I,warningIcon:q,row:E,field:F,label:D,input:B,radioGroup:k,radioLabel:M,button:O},$={height:"",age:"",currentWeight:"",desiredWeight:"",bloodType:"",activityLevel:""},H=({onSubmit:b})=>{const[i,x]=r.useState($),[t,v]=r.useState({}),n=s=>{const{name:N,value:f}=s.target;x(_=>({..._,[N]:f}))},m=()=>{const s={};return(!i.height||Number(i.height)<=0)&&(s.height="Height is required"),(!i.age||Number(i.age)<=0)&&(s.age="Age is required"),(!i.currentWeight||Number(i.currentWeight)<=0)&&(s.currentWeight="Current weight is required"),(!i.desiredWeight||Number(i.desiredWeight)<=0)&&(s.desiredWeight="Desired weight is required"),i.bloodType||(s.bloodType="Blood type is required"),i.activityLevel||(s.activityLevel="Activity level is required"),v(s),Object.keys(s).length===0},h=s=>{s.preventDefault(),m()&&b({height:Number(i.height),age:Number(i.age),currentWeight:Number(i.currentWeight),desiredWeight:Number(i.desiredWeight),bloodType:Number(i.bloodType),activityLevel:Number(i.activityLevel)})},j=[{value:"1",label:"0"},{value:"2",label:"AB"},{value:"3",label:"A"},{value:"4",label:"B"}];return e.jsxs("form",{className:a.form,onSubmit:h,children:[e.jsxs("div",{className:a.row,children:[e.jsxs("div",{className:a.field,children:[e.jsx("label",{htmlFor:"height",className:a.label,children:"Height *"}),e.jsx("input",{id:"height",type:"number",name:"height",value:i.height,onChange:n,className:a.input}),t.height&&e.jsxs("div",{className:a.warning,children:[e.jsx("span",{className:a.warningIcon,children:"⚠"}),e.jsx("span",{children:t.height})]})]}),e.jsxs("div",{className:a.field,children:[e.jsx("label",{htmlFor:"desiredWeight",className:a.label,children:"Desired weight *"}),e.jsx("input",{id:"desiredWeight",type:"number",name:"desiredWeight",value:i.desiredWeight,onChange:n,className:a.input}),t.desiredWeight&&e.jsxs("div",{className:a.warning,children:[e.jsx("span",{className:a.warningIcon,children:"⚠"}),e.jsx("span",{children:t.desiredWeight})]})]})]}),e.jsxs("div",{className:a.row,children:[e.jsxs("div",{className:a.field,children:[e.jsx("label",{htmlFor:"age",className:a.label,children:"Age *"}),e.jsx("input",{id:"age",type:"number",name:"age",value:i.age,onChange:n,className:a.input}),t.age&&e.jsxs("div",{className:a.warning,children:[e.jsx("span",{className:a.warningIcon,children:"⚠"}),e.jsx("span",{children:t.age})]})]}),e.jsxs("div",{className:a.field,children:[e.jsx("span",{className:a.label,children:"Blood type *"}),e.jsx("div",{className:a.radioGroup,children:j.map(s=>e.jsxs("label",{className:a.radioLabel,children:[e.jsx("input",{type:"radio",name:"bloodType",value:s.value,checked:i.bloodType===s.value,onChange:n}),e.jsx("span",{children:s.label})]},s.value))}),t.bloodType&&e.jsxs("div",{className:a.warning,children:[e.jsx("span",{className:a.warningIcon,children:"⚠"}),e.jsx("span",{children:t.bloodType})]})]})]}),e.jsxs("div",{className:a.row,children:[e.jsxs("div",{className:a.field,children:[e.jsx("label",{className:a.label,children:"Current weight *"}),e.jsx("input",{type:"number",name:"currentWeight",value:i.currentWeight,onChange:n,className:a.input}),t.currentWeight&&e.jsxs("div",{className:a.warning,children:[e.jsx("span",{className:a.warningIcon,children:"⚠"}),e.jsx("span",{children:t.currentWeight})]})]}),e.jsxs("div",{className:a.field,children:[e.jsx("label",{className:a.label,children:"Activity level *"}),e.jsxs("select",{name:"activityLevel",value:i.activityLevel,onChange:n,className:a.input,children:[e.jsx("option",{value:"",disabled:!0,children:"Select activity level"}),e.jsx("option",{value:"1.2",children:"Minimum (Sedentary)"}),e.jsx("option",{value:"1.375",children:"Low (Light exercise 1–3 times/week)"}),e.jsx("option",{value:"1.55",children:"Medium (Moderate exercise 3–5 times/week)"}),e.jsx("option",{value:"1.725",children:"High (Hard exercise 6–7 times/week)"}),e.jsx("option",{value:"1.9",children:"Maximum (Daily intense exercise or job)"})]}),t.activityLevel&&e.jsxs("div",{className:a.warning,children:[e.jsx("span",{className:a.warningIcon,children:"⚠"}),e.jsx("span",{children:t.activityLevel})]})]})]}),e.jsx("button",{type:"submit",className:a.button,children:"Start losing weight"})]})},P="_page_uxyqo_3",K="_inner_uxyqo_10",V="_left_uxyqo_18",Y="_title_uxyqo_23",z="_right_uxyqo_40",U="_summaryBox_uxyqo_51",J="_error_uxyqo_57",c={page:P,inner:K,left:V,title:Y,right:z,summaryBox:U,error:J},Z=()=>{const[b,i]=r.useState(null),[x,t]=r.useState([]),[v,n]=r.useState(0),[m,h]=r.useState(null),[j,s]=r.useState(!0),[N,f]=r.useState(!1);if(r.useEffect(()=>{(async()=>{try{const{data:d}=await y.get("/api/v1/users/me"),l=d.user||d;if(typeof l.dailyCalorieGoal=="number"?i(l.dailyCalorieGoal):typeof l.dailyRate=="number"&&i(l.dailyRate),l.bloodGroup){const W=await y.get(`/api/v1/products/forbidden?bloodGroup=${l.bloodGroup}`);Array.isArray(W.data.forbiddenFoods)&&t(W.data.forbiddenFoods)}const g=new Date,w=g.getFullYear(),S=String(g.getMonth()+1).padStart(2,"0"),u=String(g.getDate()).padStart(2,"0"),o=`${w}-${S}-${u}`,p=await y.get(`/api/v1/day/info?date=${o}`);typeof p.data.consumedCalories=="number"&&n(p.data.consumedCalories),typeof p.data.dailyGoal=="number"&&i(p.data.dailyGoal)}catch(d){console.error("AUTH PAGE LOAD ERROR:",d),d.response?.status===401&&f(!0)}finally{s(!1)}})()},[]),N)return e.jsx(A,{to:"/login",replace:!0});if(j)return e.jsx(R,{full:!0,size:60});const _=new Date().toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}),C=async({height:L,age:d,currentWeight:l,desiredWeight:g,bloodType:w,activityLevel:S})=>{h(null);try{const u={weight:Number(l),height:Number(L),age:Number(d),activityLevel:Number(S),targetWeight:Number(g),bloodGroup:Number(w)},{data:o}=await y.post("/api/v1/calories/private-intake",u);typeof o.dailyRate=="number"?i(o.dailyRate):typeof o.dailyCalorieGoal=="number"?i(o.dailyCalorieGoal):h("Server did not return a valid daily calorie value."),Array.isArray(o.forbiddenFoods)&&t(o.forbiddenFoods)}catch(u){console.error("PRIVATE-INTAKE ERROR:",u),h(u.response?.data?.message||"Something went wrong while calculating calories.")}};return e.jsx("section",{className:c.page,children:e.jsxs("div",{className:c.inner,children:[e.jsxs("div",{className:c.left,children:[e.jsxs("h1",{className:c.title,children:["Calculate your daily calorie ",e.jsx("br",{})," intake right now"]}),e.jsx(H,{onSubmit:C}),m&&e.jsx("p",{className:c.error,children:m})]}),e.jsx("div",{className:c.right,children:e.jsx("div",{className:c.summaryBox,children:e.jsx(T,{date:_,dailyRate:b,consumed:v,forbiddenFoods:x})})})]})})};export{Z as default};
